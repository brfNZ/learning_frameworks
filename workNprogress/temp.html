<!DOCTYPE html>
<html>
<head>
    <title>Tao Te Ching Diviner</title>
    <style>
        body { background: #1e293b; display: flex; justify-content: center; align-items: center; min-height: 100vh; font-family: Arial; margin: 0; }
        .container { background: #475569; padding: 40px; border-radius: 12px; text-align: center; max-width: 400px; }
        h1 { color: white; margin: 0 0 10px 0; }
        .subtitle { color: #cbd5e1; margin-bottom: 30px; }
        .lines { margin: 30px 0; }
        .line { margin: 8px 0; display: flex; justify-content: center; }
        .segment { background: white; height: 12px; }
        .solid { width: 80px; }
        .seg { width: 32px; margin: 0 8px; }
        .small { width: 26px; margin: 0 3px; }
        .verse { font-size: 48px; color: #fbbf24; font-weight: bold; margin: 20px 0; }
        button { padding: 12px 20px; margin: 5px; font-size: 16px; cursor: pointer; border: none; border-radius: 8px; }
        .gen { background: #b45309; color: white; }
        .res { background: #64748b; color: white; }
        .history { margin-top: 20px; }
        .item { display: inline-block; background: #334155; color: #fbbf24; padding: 5px 10px; margin: 3px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>â˜¯ Tao Te Ching</h1>
        <div class="subtitle">I Ching Verse Selector</div>
        
        <div class="lines" id="lines"></div>
        <div class="verse" id="verse">---</div>
        
        <button class="gen" onclick="generate()">Generate</button>
        <button class="res" onclick="resetApp()">Reset</button>
        
        <div class="history" id="history"></div>
    </div>

    <script>
        var lines = [null, null, null, null];
        var verse = null;
        var hist = [];

        function drawLine(type) {
            if (type === 0) {
                return '<div class="line"><div class="segment solid"></div></div>';
            } else if (type === 1) {
                return '<div class="line"><div class="segment seg"></div><div class="segment seg"></div></div>';
            } else if (type === 2) {
                return '<div class="line"><div class="segment small"></div><div class="segment small"></div><div class="segment small"></div></div>';
            } else {
                return '<div class="line" style="opacity: 0.3;"><div class="segment small"></div><div class="segment small"></div><div class="segment small"></div></div>';
            }
        }

        function display() {
            var html = '';
            for (var i = 0; i < 4; i++) {
                html += drawLine(lines[i]);
            }
            document.getElementById('lines').innerHTML = html;

            if (verse) {
                document.getElementById('verse').innerHTML = 'Verse ' + verse;
            } else {
                document.getElementById('verse').innerHTML = '---';
            }

            if (hist.length > 0) {
                var h = '';
                for (var j = 0; j < hist.length; j++) {
                    h += '<div class="item">' + hist[j] + '</div>';
                }
                document.getElementById('history').innerHTML = h;
            }
        }

        function generate() {
            lines[0] = Math.floor(Math.random() * 3);
            lines[1] = Math.floor(Math.random() * 3);
            lines[2] = Math.floor(Math.random() * 3);
            lines[3] = Math.floor(Math.random() * 3);

            var v = lines[0] * 27 + lines[1] * 9 + lines[2] * 3 + lines[3] + 1;
            verse = v;
            hist.push(v);

            display();
        }

        function resetApp() {
            lines = [null, null, null, null];
            verse = null;
            display();
        }

        display();
    </script>
</body>
</html>
